<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UGCå›¾æ¡ˆé€‰æ‹©å™¨æµ‹è¯•</title>
    <link rel="stylesheet" href="css/styles.css">
    <style>
        body {
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 2px solid #e9ecef;
            border-radius: 12px;
        }
        
        .test-section h3 {
            margin-top: 0;
            color: #495057;
        }
        
        .test-result {
            margin-top: 15px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 6px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ¨ UGCå›¾æ¡ˆé€‰æ‹©å™¨æµ‹è¯•</h1>
        <p>æµ‹è¯•å›¾æ¡ˆé€‰æ‹©å™¨åœ¨UGCé…ç½®ä¸­çš„é›†æˆåŠŸèƒ½</p>
        
        <!-- åœ°æ¿é…ç½®æµ‹è¯• -->
        <div class="test-section">
            <h3>ğŸ  åœ°æ¿é…ç½®æµ‹è¯•</h3>
            <div class="ugc-field-row">
                <label for="testGroundPattern">åœ°æ¿å›¾æ¡ˆID:</label>
                <div class="pattern-selector-container">
                    <input type="number" id="testGroundPattern" min="0" value="3" placeholder="é»˜è®¤: 0" readonly>
                    <button type="button" class="pattern-select-btn" data-target="testGroundPattern" data-type="pattern">é€‰æ‹©å›¾æ¡ˆ</button>
                </div>
            </div>
            <div class="ugc-field-row">
                <label for="testGroundFrame">åœ°æ¿è¾¹æ¡†ID:</label>
                <div class="pattern-selector-container">
                    <input type="number" id="testGroundFrame" min="0" value="15" placeholder="é»˜è®¤: 0" readonly>
                    <button type="button" class="pattern-select-btn" data-target="testGroundFrame" data-type="frame">é€‰æ‹©è¾¹æ¡†</button>
                </div>
            </div>
            <div class="test-result">
                <strong>å½“å‰å€¼:</strong><br>
                å›¾æ¡ˆID: <span id="groundPatternResult">3</span><br>
                è¾¹æ¡†ID: <span id="groundFrameResult">15</span>
            </div>
        </div>
        
        <!-- ç»ç’ƒé…ç½®æµ‹è¯• -->
        <div class="test-section">
            <h3>ğŸ”· ç»ç’ƒé…ç½®æµ‹è¯•</h3>
            <div class="ugc-field-row">
                <label for="testGlassPattern">ç»ç’ƒå›¾æ¡ˆID:</label>
                <div class="pattern-selector-container">
                    <input type="number" id="testGlassPattern" min="0" value="38" placeholder="é»˜è®¤: 0" readonly>
                    <button type="button" class="pattern-select-btn" data-target="testGlassPattern" data-type="pattern">é€‰æ‹©å›¾æ¡ˆ</button>
                </div>
            </div>
            <div class="ugc-field-row">
                <label for="testGlassAlpha">ç»ç’ƒé€æ˜åº¦:</label>
                <input type="number" id="testGlassAlpha" min="0" max="100" value="50" placeholder="é»˜è®¤: 50">
            </div>
            <div class="test-result">
                <strong>å½“å‰å€¼:</strong><br>
                å›¾æ¡ˆID: <span id="glassPatternResult">38</span><br>
                é€æ˜åº¦: <span id="glassAlphaResult">50</span>
            </div>
        </div>
        
        <!-- åŠŸèƒ½æµ‹è¯•æŒ‰é’® -->
        <div class="test-section">
            <h3>ğŸ§ª åŠŸèƒ½æµ‹è¯•</h3>
            <button class="btn btn-primary" onclick="testGetAllValues()">è·å–æ‰€æœ‰é…ç½®å€¼</button>
            <button class="btn btn-secondary" onclick="resetAllValues()">é‡ç½®æ‰€æœ‰å€¼</button>
            <div class="test-result" id="allValuesResult">
                ç‚¹å‡»"è·å–æ‰€æœ‰é…ç½®å€¼"æŸ¥çœ‹ç»“æœ
            </div>
        </div>
    </div>

    <!-- å›¾æ¡ˆé€‰æ‹©å™¨æ¨¡æ€æ¡† -->
    <div id="patternSelectorModal" class="pattern-modal" style="display: none;">
        <div class="pattern-modal-content">
            <div class="pattern-modal-header">
                <h3 id="patternModalTitle">é€‰æ‹©å›¾æ¡ˆ</h3>
                <button class="pattern-modal-close" id="closePatternModal">&times;</button>
            </div>
            <div class="pattern-modal-body">
                <div class="pattern-canvas-container">
                    <canvas id="patternSelectorCanvas" class="pattern-canvas"></canvas>
                    <div id="patternLoadingText" class="pattern-loading">æ­£åœ¨åŠ è½½å›¾æ¡ˆ...</div>
                </div>
                <div class="pattern-info">
                    <div id="selectedPatternInfo" class="selected-pattern-info" style="display: none;">
                        <h4>å·²é€‰æ‹©å›¾æ¡ˆ</h4>
                        <div id="patternPreviewContainer" class="pattern-preview-container">
                            <canvas id="patternPreviewCanvas" class="pattern-preview-canvas"></canvas>
                        </div>
                        <div class="pattern-details">
                            <p><strong>å›¾æ¡ˆID:</strong> <span id="selectedPatternId">-</span></p>
                            <p><strong>ä½ç½®:</strong> <span id="selectedPatternPosition">-</span></p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="pattern-modal-footer">
                <button class="btn btn-secondary" id="cancelPatternSelection">å–æ¶ˆ</button>
                <button class="btn btn-primary" id="confirmPatternSelection" disabled>ç¡®è®¤é€‰æ‹©</button>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="js/ugcPatternSelector.js"></script>
    <script>
        // åˆå§‹åŒ–å›¾æ¡ˆé€‰æ‹©å™¨
        document.addEventListener('DOMContentLoaded', function() {
            if (window.App && window.App.UGCPatternSelector) {
                window.App.UGCPatternSelector.init();
                console.log('UGCå›¾æ¡ˆé€‰æ‹©å™¨å·²åˆå§‹åŒ–');
            } else {
                console.error('UGCå›¾æ¡ˆé€‰æ‹©å™¨æ¨¡å—æœªæ‰¾åˆ°');
            }
            
            // ç›‘å¬è¾“å…¥æ¡†å˜åŒ–
            setupValueMonitors();
        });
        
        // è®¾ç½®å€¼ç›‘å¬å™¨
        function setupValueMonitors() {
            const monitors = [
                { input: 'testGroundPattern', result: 'groundPatternResult' },
                { input: 'testGroundFrame', result: 'groundFrameResult' },
                { input: 'testGlassPattern', result: 'glassPatternResult' },
                { input: 'testGlassAlpha', result: 'glassAlphaResult' }
            ];
            
            monitors.forEach(({ input, result }) => {
                const inputEl = document.getElementById(input);
                const resultEl = document.getElementById(result);
                
                if (inputEl && resultEl) {
                    inputEl.addEventListener('input', function() {
                        resultEl.textContent = this.value;
                    });
                }
            });
        }
        
        // æµ‹è¯•è·å–æ‰€æœ‰å€¼
        function testGetAllValues() {
            const values = {
                groundPattern: document.getElementById('testGroundPattern').value,
                groundFrame: document.getElementById('testGroundFrame').value,
                glassPattern: document.getElementById('testGlassPattern').value,
                glassAlpha: document.getElementById('testGlassAlpha').value
            };
            
            document.getElementById('allValuesResult').innerHTML = `
                <strong>æ‰€æœ‰é…ç½®å€¼:</strong><br>
                ${JSON.stringify(values, null, 2)}
            `;
        }
        
        // é‡ç½®æ‰€æœ‰å€¼
        function resetAllValues() {
            document.getElementById('testGroundPattern').value = '3';
            document.getElementById('testGroundFrame').value = '15';
            document.getElementById('testGlassPattern').value = '38';
            document.getElementById('testGlassAlpha').value = '50';
            
            // è§¦å‘inputäº‹ä»¶æ›´æ–°æ˜¾ç¤º
            ['testGroundPattern', 'testGroundFrame', 'testGlassPattern', 'testGlassAlpha'].forEach(id => {
                document.getElementById(id).dispatchEvent(new Event('input'));
            });
            
            document.getElementById('allValuesResult').textContent = 'æ‰€æœ‰å€¼å·²é‡ç½®';
        }
    </script>
</body>
</html>
