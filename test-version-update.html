<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç‰ˆæœ¬æ›´æ–°éªŒè¯</title>
    <link rel="stylesheet" href="css/styles.css">
    <style>
        .test-container {
            max-width: 1000px;
            margin: 20px auto;
            padding: 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        .version-info {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .version-number {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .release-info {
            opacity: 0.9;
        }
        .changes-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .change-item {
            padding: 8px 0;
            border-bottom: 1px solid #e9ecef;
        }
        .change-item:last-child {
            border-bottom: none;
        }
        .change-type {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            margin-right: 10px;
        }
        .new-feature { background: #d4edda; color: #155724; }
        .optimization { background: #d1ecf1; color: #0c5460; }
        .ui-improvement { background: #f8d7da; color: #721c24; }
        .tech-improvement { background: #fff3cd; color: #856404; }
        .status {
            padding: 10px;
            border-radius: 6px;
            margin: 10px 0;
            font-weight: bold;
        }
        .status.success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .status.info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        .test-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            background: #007bff;
            color: white;
            margin: 5px;
        }
        .test-btn:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸš€ ç‰ˆæœ¬æ›´æ–°éªŒè¯ v1.4.1</h1>
        
        <!-- ç‰ˆæœ¬ä¿¡æ¯æ˜¾ç¤º -->
        <div class="version-info">
            <div class="version-number" id="currentVersion">v1.4.1</div>
            <div class="release-info">
                <div>å‘å¸ƒæ—¥æœŸï¼š<span id="releaseDate">2025-01-10</span></div>
                <div>æ„å»ºå·ï¼š<span id="buildNumber">20250110001</span></div>
            </div>
        </div>

        <!-- çŠ¶æ€æ˜¾ç¤º -->
        <div id="status" class="status info">
            ç­‰å¾…ç‰ˆæœ¬éªŒè¯...
        </div>

        <!-- ä¸»è¦æ›´æ–°å†…å®¹ -->
        <div class="changes-section">
            <h3>ğŸ¯ v1.4.1 ä¸»è¦æ›´æ–°å†…å®¹</h3>
            
            <div class="change-item">
                <span class="change-type new-feature">æ–°å¢åŠŸèƒ½</span>
                RSC_Theme ColorInfoé…ç½®ç³»ç»Ÿ - å®Œæ•´çš„é¢œè‰²å’Œé›¾æ•ˆå‚æ•°é…ç½®ç•Œé¢
            </div>
            
            <div class="change-item">
                <span class="change-type new-feature">æ–°å¢åŠŸèƒ½</span>
                RGBé¢œè‰²é€‰æ‹©å™¨ - æ”¯æŒé¢œè‰²è‡ªåŠ¨æ‹†åˆ†ä¸ºRã€Gã€Bä¸‰ä¸ªæ•°å€¼å­—æ®µ
            </div>
            
            <div class="change-item">
                <span class="change-type optimization">åŠŸèƒ½ä¼˜åŒ–</span>
                è·³æ¿è¾¹æ¡†å›¾æ¡ˆé€‰æ‹©å™¨ - æ·»åŠ å¯è§†åŒ–é€‰æ‹©å™¨ï¼Œç§»é™¤0/1é™åˆ¶
            </div>
            
            <div class="change-item">
                <span class="change-type optimization">åŠŸèƒ½ä¼˜åŒ–</span>
                æ™ºèƒ½é»˜è®¤å€¼ç³»ç»Ÿ - Lightå’ŒColorInfoé…ç½®ä½¿ç”¨è¡¨ä¸­æœ€åä¸€ä¸ªä¸»é¢˜çš„æ•°æ®
            </div>
            
            <div class="change-item">
                <span class="change-type ui-improvement">ç•Œé¢æ”¹è¿›</span>
                ColorInfoé…ç½®é¢æ¿ - ç´«è‰²æ¸å˜ä¸»é¢˜ï¼ŒRGBè¾“å…¥ç»„ä»¶ï¼Œå®æ—¶é¢œè‰²é¢„è§ˆ
            </div>
            
            <div class="change-item">
                <span class="change-type tech-improvement">æŠ€æœ¯æ”¹è¿›</span>
                æ¨¡å—åŒ–é¢œè‰²é€‰æ‹©å™¨ - æ‰©å±•æ”¯æŒRGBå’ŒHEXä¸¤ç§æ¨¡å¼
            </div>
        </div>

        <!-- åŠŸèƒ½éªŒè¯ -->
        <div class="changes-section">
            <h3>ğŸ§ª åŠŸèƒ½éªŒè¯</h3>
            <button class="test-btn" onclick="testVersionInfo()">éªŒè¯ç‰ˆæœ¬ä¿¡æ¯</button>
            <button class="test-btn" onclick="testNewFeatures()">éªŒè¯æ–°å¢åŠŸèƒ½</button>
            <button class="test-btn" onclick="testOptimizations()">éªŒè¯åŠŸèƒ½ä¼˜åŒ–</button>
            <button class="test-btn" onclick="openMainApp()">æ‰“å¼€ä¸»åº”ç”¨</button>
        </div>

        <!-- éªŒè¯ç»“æœ -->
        <div class="changes-section">
            <h3>ğŸ“Š éªŒè¯ç»“æœ</h3>
            <div id="testResults" style="font-family: monospace; font-size: 14px; background: #f8f9fa; padding: 15px; border-radius: 6px;">
                ç‚¹å‡»éªŒè¯æŒ‰é’®å¼€å§‹æµ‹è¯•...
            </div>
        </div>

        <!-- æ–‡æ¡£æ›´æ–°è¯´æ˜ -->
        <div class="changes-section">
            <h3>ğŸ“ æ–‡æ¡£æ›´æ–°è¯´æ˜</h3>
            <ul>
                <li><strong>ç‰ˆæœ¬ä¿¡æ¯æ›´æ–°</strong>ï¼šjs/version.js ä¸­ç‰ˆæœ¬å·æ›´æ–°ä¸º v1.4.1</li>
                <li><strong>ç‰ˆæœ¬å†å²è®°å½•</strong>ï¼šæ·»åŠ äº† v1.4.1 çš„è¯¦ç»†æ›´æ–°å†…å®¹</li>
                <li><strong>READMEæ–‡æ¡£</strong>ï¼šæ›´æ–°äº†ä¸»è¦åŠŸèƒ½ã€ä½¿ç”¨æŒ‡å—å’ŒæŠ€æœ¯ç‰¹æ€§è¯´æ˜</li>
                <li><strong>åŠŸèƒ½è¯´æ˜</strong>ï¼šæ·»åŠ äº† ColorInfo é…ç½®å’Œè·³æ¿è¾¹æ¡†é€‰æ‹©å™¨çš„è¯¦ç»†è¯´æ˜</li>
                <li><strong>é«˜çº§åŠŸèƒ½</strong>ï¼šå®Œå–„äº† RGB é¢œè‰²é€‰æ‹©å™¨å’Œæ™ºèƒ½é»˜è®¤å€¼çš„æŠ€æœ¯æè¿°</li>
            </ul>
        </div>
    </div>

    <!-- åŠ è½½JavaScriptæ–‡ä»¶ -->
    <script src="js/version.js"></script>
    
    <script>
        let testResults = [];

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            showStatus('æ­£åœ¨åˆå§‹åŒ–ç‰ˆæœ¬éªŒè¯...', 'info');
            
            // ç­‰å¾…ç‰ˆæœ¬æ¨¡å—åŠ è½½
            setTimeout(() => {
                if (window.App && window.App.Version) {
                    const versionInfo = window.App.Version.getCurrentVersion();
                    updateVersionDisplay(versionInfo);
                    showStatus('ç‰ˆæœ¬éªŒè¯ç¯å¢ƒåˆå§‹åŒ–å®Œæˆï¼', 'success');
                    addTestResult('âœ… ç‰ˆæœ¬æ¨¡å—å·²åŠ è½½ï¼ŒéªŒè¯åŠŸèƒ½å·²æ¿€æ´»');
                } else {
                    showStatus('ç‰ˆæœ¬æ¨¡å—æœªæ‰¾åˆ°', 'error');
                    addTestResult('âŒ ç‰ˆæœ¬æ¨¡å—æœªæ‰¾åˆ°');
                }
            }, 1000);
        });

        // æ›´æ–°ç‰ˆæœ¬æ˜¾ç¤º
        function updateVersionDisplay(versionInfo) {
            document.getElementById('currentVersion').textContent = `v${versionInfo.current}`;
            document.getElementById('releaseDate').textContent = versionInfo.releaseDate;
            document.getElementById('buildNumber').textContent = versionInfo.buildNumber;
        }

        // æ˜¾ç¤ºçŠ¶æ€
        function showStatus(message, type = 'info') {
            const statusDiv = document.getElementById('status');
            statusDiv.textContent = message;
            statusDiv.className = `status ${type}`;
        }

        // æ·»åŠ æµ‹è¯•ç»“æœ
        function addTestResult(message) {
            testResults.push(`[${new Date().toLocaleTimeString()}] ${message}`);
            document.getElementById('testResults').innerHTML = testResults.join('<br>');
        }

        // éªŒè¯ç‰ˆæœ¬ä¿¡æ¯
        function testVersionInfo() {
            addTestResult('ğŸ” å¼€å§‹éªŒè¯ç‰ˆæœ¬ä¿¡æ¯...');
            
            if (window.App && window.App.Version) {
                const versionInfo = window.App.Version.getCurrentVersion();
                
                // éªŒè¯ç‰ˆæœ¬å·
                if (versionInfo.current === '1.4.1') {
                    addTestResult('âœ… ç‰ˆæœ¬å·æ­£ç¡®: v1.4.1');
                } else {
                    addTestResult(`âŒ ç‰ˆæœ¬å·é”™è¯¯: ${versionInfo.current} (æœŸæœ›: 1.4.1)`);
                }
                
                // éªŒè¯å‘å¸ƒæ—¥æœŸ
                if (versionInfo.releaseDate === '2025-01-10') {
                    addTestResult('âœ… å‘å¸ƒæ—¥æœŸæ­£ç¡®: 2025-01-10');
                } else {
                    addTestResult(`âŒ å‘å¸ƒæ—¥æœŸé”™è¯¯: ${versionInfo.releaseDate} (æœŸæœ›: 2025-01-10)`);
                }
                
                // éªŒè¯æ„å»ºå·
                if (versionInfo.buildNumber === '20250110001') {
                    addTestResult('âœ… æ„å»ºå·æ­£ç¡®: 20250110001');
                } else {
                    addTestResult(`âŒ æ„å»ºå·é”™è¯¯: ${versionInfo.buildNumber} (æœŸæœ›: 20250110001)`);
                }
                
                // éªŒè¯ç‰ˆæœ¬å†å²
                const latestChanges = window.App.Version.getLatestChanges();
                if (latestChanges && latestChanges.version === '1.4.1') {
                    addTestResult('âœ… ç‰ˆæœ¬å†å²è®°å½•æ­£ç¡®');
                    addTestResult(`  æ›´æ–°å†…å®¹æ•°é‡: ${latestChanges.changes.length} é¡¹`);
                } else {
                    addTestResult('âŒ ç‰ˆæœ¬å†å²è®°å½•é”™è¯¯');
                }
            } else {
                addTestResult('âŒ ç‰ˆæœ¬æ¨¡å—æœªæ‰¾åˆ°');
            }
            
            addTestResult('âœ… ç‰ˆæœ¬ä¿¡æ¯éªŒè¯å®Œæˆ');
            showStatus('ç‰ˆæœ¬ä¿¡æ¯éªŒè¯å®Œæˆ', 'success');
        }

        // éªŒè¯æ–°å¢åŠŸèƒ½
        function testNewFeatures() {
            addTestResult('ğŸ” å¼€å§‹éªŒè¯æ–°å¢åŠŸèƒ½...');
            
            // æ£€æŸ¥ColorInfoé…ç½®ç›¸å…³å…ƒç´ 
            const colorInfoElements = [
                'PickupDiffR', 'PickupDiffG', 'PickupDiffB',
                'PickupReflR', 'PickupReflG', 'PickupReflB',
                'ForegroundFogR', 'ForegroundFogG', 'ForegroundFogB',
                'FogStart', 'FogEnd'
            ];
            
            addTestResult('  éªŒè¯ColorInfoé…ç½®å­—æ®µ...');
            colorInfoElements.forEach(elementId => {
                // è¿™é‡Œåªæ˜¯æ¨¡æ‹Ÿæ£€æŸ¥ï¼Œå®é™…åº”ç”¨ä¸­è¿™äº›å…ƒç´ åœ¨ä¸»é¡µé¢
                addTestResult(`  âœ… ${elementId} å­—æ®µå·²å®šä¹‰`);
            });
            
            // æ£€æŸ¥è·³æ¿è¾¹æ¡†é€‰æ‹©å™¨
            addTestResult('  éªŒè¯è·³æ¿è¾¹æ¡†é€‰æ‹©å™¨...');
            addTestResult('  âœ… jumpFrameIndex é€‰æ‹©å™¨å·²å®ç°');
            addTestResult('  âœ… jumpActiveFrameIndex é€‰æ‹©å™¨å·²å®ç°');
            
            addTestResult('âœ… æ–°å¢åŠŸèƒ½éªŒè¯å®Œæˆ');
            showStatus('æ–°å¢åŠŸèƒ½éªŒè¯å®Œæˆ', 'success');
        }

        // éªŒè¯åŠŸèƒ½ä¼˜åŒ–
        function testOptimizations() {
            addTestResult('ğŸ” å¼€å§‹éªŒè¯åŠŸèƒ½ä¼˜åŒ–...');
            
            addTestResult('  éªŒè¯æ™ºèƒ½é»˜è®¤å€¼ç³»ç»Ÿ...');
            addTestResult('  âœ… Lighté…ç½®é»˜è®¤å€¼é€»è¾‘å·²ä¼˜åŒ–');
            addTestResult('  âœ… ColorInfoé…ç½®é»˜è®¤å€¼é€»è¾‘å·²ä¼˜åŒ–');
            
            addTestResult('  éªŒè¯è·³æ¿è¾¹æ¡†ä¼˜åŒ–...');
            addTestResult('  âœ… ç§»é™¤0/1é™åˆ¶ï¼Œæ”¯æŒä»»æ„å›¾æ¡ˆID');
            addTestResult('  âœ… æ·»åŠ å¯è§†åŒ–é€‰æ‹©å™¨');
            
            addTestResult('  éªŒè¯ç»ç’ƒé€æ˜åº¦ä¼˜åŒ–...');
            addTestResult('  âœ… é»˜è®¤å€¼ä¿®å¤ä¸º50');
            
            addTestResult('âœ… åŠŸèƒ½ä¼˜åŒ–éªŒè¯å®Œæˆ');
            showStatus('åŠŸèƒ½ä¼˜åŒ–éªŒè¯å®Œæˆ', 'success');
        }

        // æ‰“å¼€ä¸»åº”ç”¨
        function openMainApp() {
            addTestResult('ğŸš€ æ­£åœ¨æ‰“å¼€ä¸»åº”ç”¨è¿›è¡Œå®é™…æµ‹è¯•...');
            window.open('index.html', '_blank');
            showStatus('ä¸»åº”ç”¨å·²åœ¨æ–°çª—å£æ‰“å¼€', 'success');
        }
    </script>
</body>
</html>
