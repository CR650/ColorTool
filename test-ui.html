<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ColorTool UI æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        .status.supported {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .status.unsupported {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .ui-section {
            border: 2px dashed #ccc;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .ui-section.visible {
            border-color: #28a745;
            background-color: #f8fff9;
        }
        .ui-section.hidden {
            border-color: #dc3545;
            background-color: #fff5f5;
            opacity: 0.5;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:disabled {
            background: #6c757d;
            cursor: not-allowed;
        }
    </style>
</head>
<body>
    <h1>ColorTool åŠ¨æ€UIæµ‹è¯•é¡µé¢</h1>
    
    <div class="test-section">
        <h2>æµè§ˆå™¨å…¼å®¹æ€§æ£€æµ‹</h2>
        <div id="browserInfo"></div>
        <div id="supportStatus"></div>
    </div>

    <div class="test-section">
        <h2>UIæ˜¾ç¤ºæµ‹è¯•</h2>
        <p>æ ¹æ®æµè§ˆå™¨èƒ½åŠ›ï¼Œåº”è¯¥åªæ˜¾ç¤ºä¸€ä¸ªåŒºåŸŸï¼š</p>
        
        <div id="folderSelectionSection" class="ui-section" style="display: none;">
            <h3>ğŸ“ é€‰æ‹©Unityé¡¹ç›®æ–‡ä»¶å¤¹</h3>
            <p>è¿™æ˜¯æ”¯æŒæ–‡ä»¶å¤¹é€‰æ‹©çš„æµè§ˆå™¨æ˜¾ç¤ºçš„åŒºåŸŸ</p>
            <button id="selectFolderBtn">ğŸ“ é€‰æ‹©Unityé¡¹ç›®æ–‡ä»¶å¤¹</button>
        </div>

        <div id="individualFileSelectionSection" class="ui-section" style="display: none;">
            <h3>ğŸ“„ åˆ†åˆ«é€‰æ‹©æ–‡ä»¶</h3>
            <p>è¿™æ˜¯ä¸æ”¯æŒæ–‡ä»¶å¤¹é€‰æ‹©çš„æµè§ˆå™¨æ˜¾ç¤ºçš„åŒºåŸŸ</p>
            <div id="browserUpgradeNote" style="display: none; margin-bottom: 20px; padding: 15px; border: 1px solid #ffc107; border-radius: 5px; background-color: #fff3cd;">
                <h5 style="margin: 0 0 10px 0; color: #856404;">ğŸ’¡ æµè§ˆå™¨å…¼å®¹æ€§æç¤º</h5>
                <p style="margin: 0; color: #856404;">
                    æ‚¨å½“å‰ä½¿ç”¨çš„æµè§ˆå™¨ä¸æ”¯æŒæ–‡ä»¶å¤¹é€‰æ‹©åŠŸèƒ½ã€‚<br>
                    å»ºè®®å‡çº§åˆ° <strong>Chrome 86+</strong> æˆ– <strong>Edge 86+</strong> ä»¥è·å¾—æ›´å¥½çš„ä½“éªŒã€‚
                </p>
            </div>
            <button>é€‰æ‹©RSC_Theme.xlsæ–‡ä»¶</button>
        </div>
    </div>

    <div class="test-section">
        <h2>æ‰‹åŠ¨åˆ‡æ¢æµ‹è¯•</h2>
        <button onclick="testSupportedMode()">æ¨¡æ‹Ÿæ”¯æŒçš„æµè§ˆå™¨</button>
        <button onclick="testUnsupportedMode()">æ¨¡æ‹Ÿä¸æ”¯æŒçš„æµè§ˆå™¨</button>
    </div>

    <script>
        // æ¨¡æ‹Ÿæ–‡ä»¶å¤¹é€‰æ‹©APIæ£€æµ‹
        function checkFolderSupport() {
            return 'showDirectoryPicker' in window;
        }

        // è®¾ç½®åŠ¨æ€UI
        function setupDynamicUI(isSupported) {
            const folderSelectionSection = document.getElementById('folderSelectionSection');
            const individualFileSelectionSection = document.getElementById('individualFileSelectionSection');
            const browserUpgradeNote = document.getElementById('browserUpgradeNote');

            if (isSupported) {
                // æ”¯æŒæ–‡ä»¶å¤¹é€‰æ‹©çš„æµè§ˆå™¨
                if (folderSelectionSection) {
                    folderSelectionSection.style.display = 'block';
                    folderSelectionSection.classList.add('visible');
                    folderSelectionSection.classList.remove('hidden');
                }
                if (individualFileSelectionSection) {
                    individualFileSelectionSection.style.display = 'none';
                    individualFileSelectionSection.classList.add('hidden');
                    individualFileSelectionSection.classList.remove('visible');
                }
                console.log('UIå·²åˆ‡æ¢åˆ°æ–‡ä»¶å¤¹é€‰æ‹©æ¨¡å¼');
            } else {
                // ä¸æ”¯æŒæ–‡ä»¶å¤¹é€‰æ‹©çš„æµè§ˆå™¨
                if (folderSelectionSection) {
                    folderSelectionSection.style.display = 'none';
                    folderSelectionSection.classList.add('hidden');
                    folderSelectionSection.classList.remove('visible');
                }
                if (individualFileSelectionSection) {
                    individualFileSelectionSection.style.display = 'block';
                    individualFileSelectionSection.classList.add('visible');
                    individualFileSelectionSection.classList.remove('hidden');
                }
                if (browserUpgradeNote) {
                    browserUpgradeNote.style.display = 'block';
                }
                console.log('UIå·²åˆ‡æ¢åˆ°å…¼å®¹æ¨¡å¼ï¼ˆå•æ–‡ä»¶é€‰æ‹©ï¼‰');
            }
        }

        // æ˜¾ç¤ºæµè§ˆå™¨ä¿¡æ¯
        function displayBrowserInfo() {
            const browserInfo = document.getElementById('browserInfo');
            const supportStatus = document.getElementById('supportStatus');
            const userAgent = navigator.userAgent;
            
            let browserName = 'Unknown';
            if (userAgent.includes('Chrome') && !userAgent.includes('Edg')) {
                browserName = 'Chrome';
            } else if (userAgent.includes('Edg')) {
                browserName = 'Edge';
            } else if (userAgent.includes('Firefox')) {
                browserName = 'Firefox';
            } else if (userAgent.includes('Safari') && !userAgent.includes('Chrome')) {
                browserName = 'Safari';
            }

            const isSupported = checkFolderSupport();
            
            browserInfo.innerHTML = `
                <strong>æµè§ˆå™¨:</strong> ${browserName}<br>
                <strong>User Agent:</strong> ${userAgent}<br>
                <strong>æ–‡ä»¶å¤¹é€‰æ‹©API:</strong> ${'showDirectoryPicker' in window ? 'âœ… æ”¯æŒ' : 'âŒ ä¸æ”¯æŒ'}
            `;

            supportStatus.className = `status ${isSupported ? 'supported' : 'unsupported'}`;
            supportStatus.innerHTML = isSupported 
                ? 'âœ… æ‚¨çš„æµè§ˆå™¨æ”¯æŒæ–‡ä»¶å¤¹é€‰æ‹©åŠŸèƒ½ï¼Œå°†æ˜¾ç¤ºæ–‡ä»¶å¤¹é€‰æ‹©ç•Œé¢'
                : 'âŒ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒæ–‡ä»¶å¤¹é€‰æ‹©åŠŸèƒ½ï¼Œå°†æ˜¾ç¤ºå…¼å®¹æ¨¡å¼ç•Œé¢';

            return isSupported;
        }

        // æµ‹è¯•å‡½æ•°
        function testSupportedMode() {
            setupDynamicUI(true);
        }

        function testUnsupportedMode() {
            setupDynamicUI(false);
        }

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            const isSupported = displayBrowserInfo();
            setupDynamicUI(isSupported);
        });
    </script>
</body>
</html>
