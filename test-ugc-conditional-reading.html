<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UGCå·¥ä½œè¡¨æ¡ä»¶è¯»å–åŠŸèƒ½æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #4CAF50;
            padding-bottom: 10px;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-title {
            font-size: 18px;
            font-weight: bold;
            color: #2196F3;
            margin-bottom: 10px;
        }
        .test-result {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-family: monospace;
        }
        .success {
            background-color: #d4edda;
            border-left: 4px solid #28a745;
            color: #155724;
        }
        .error {
            background-color: #f8d7da;
            border-left: 4px solid #dc3545;
            color: #721c24;
        }
        .info {
            background-color: #d1ecf1;
            border-left: 4px solid #17a2b8;
            color: #0c5460;
        }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
        }
        button:hover {
            background-color: #45a049;
        }
        .summary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
        }
        .summary h2 {
            margin-top: 0;
        }
    </style>
</head>
<body>
    <h1>ğŸ§ª UGCå·¥ä½œè¡¨æ¡ä»¶è¯»å–åŠŸèƒ½æµ‹è¯•</h1>
    
    <div class="test-section">
        <div class="test-title">æµ‹è¯•è¯´æ˜</div>
        <p>æœ¬æµ‹è¯•é¡µé¢ç”¨äºéªŒè¯UGCThemeæ–‡ä»¶ä¸­5ä¸ªå·¥ä½œè¡¨çš„Statusæ¡ä»¶è¯»å–é€»è¾‘ï¼š</p>
        <ul>
            <li>Custom_Ground_Color</li>
            <li>Custom_Fragile_Color</li>
            <li>Custom_Fragile_Active_Color</li>
            <li>Custom_Jump_Color</li>
            <li>Custom_Jump_Active_Color</li>
        </ul>
        <p><strong>æµ‹è¯•è¦†ç›–èŒƒå›´ï¼š</strong></p>
        <ul>
            <li>âœ… parseStatusSheetå‡½æ•°æ‰©å±•ï¼ˆ5ä¸ªUGCå­—æ®µï¼‰</li>
            <li>âœ… 15ä¸ªæ¡ä»¶è¯»å–å‡½æ•°ï¼ˆæ¯ä¸ªå·¥ä½œè¡¨3ä¸ªï¼‰</li>
            <li>âœ… getActiveUGCSheetsByStatuså‡½æ•°</li>
            <li>âœ… processUGCThemeå’ŒupdateExistingUGCThemeæ¡ä»¶å¤„ç†</li>
            <li>âœ… setSourceDataå’Œæ˜ å°„æ¨¡å¼æŒ‡ç¤ºå™¨æ›´æ–°</li>
        </ul>
    </div>

    <div class="test-section">
        <div class="test-title">å¿«é€Ÿæµ‹è¯•</div>
        <button onclick="runAllTests()">è¿è¡Œæ‰€æœ‰æµ‹è¯•</button>
        <button onclick="clearResults()">æ¸…é™¤ç»“æœ</button>
        <div id="testResults"></div>
    </div>

    <div class="test-section">
        <div class="test-title">è¯¦ç»†æµ‹è¯•åœºæ™¯</div>
        <button onclick="testParseStatusSheet()">æµ‹è¯•1: parseStatusSheetæ‰©å±•</button>
        <button onclick="testCustomGroundColorFunctions()">æµ‹è¯•2: Custom_Ground_Colorå‡½æ•°</button>
        <button onclick="testCustomFragileColorFunctions()">æµ‹è¯•3: Custom_Fragile_Colorå‡½æ•°</button>
        <button onclick="testCustomFragileActiveColorFunctions()">æµ‹è¯•4: Custom_Fragile_Active_Colorå‡½æ•°</button>
        <button onclick="testCustomJumpColorFunctions()">æµ‹è¯•5: Custom_Jump_Colorå‡½æ•°</button>
        <button onclick="testCustomJumpActiveColorFunctions()">æµ‹è¯•6: Custom_Jump_Active_Colorå‡½æ•°</button>
        <button onclick="testGetActiveUGCSheetsByStatus()">æµ‹è¯•7: getActiveUGCSheetsByStatuså‡½æ•°</button>
        <button onclick="testProcessUGCThemeConditional()">æµ‹è¯•8: processUGCThemeæ¡ä»¶å¤„ç†</button>
        <button onclick="testUpdateExistingUGCThemeConditional()">æµ‹è¯•9: updateExistingUGCThemeæ¡ä»¶å¤„ç†</button>
        <button onclick="testSetSourceDataExtension()">æµ‹è¯•10: setSourceDataæ‰©å±•</button>
        <button onclick="testMappingModeIndicatorUpdate()">æµ‹è¯•11: æ˜ å°„æ¨¡å¼æŒ‡ç¤ºå™¨æ›´æ–°</button>
        <button onclick="testCompleteDataFlow()">æµ‹è¯•12: å®Œæ•´æ•°æ®æµç¨‹éªŒè¯</button>
    </div>

    <div id="summary" class="summary" style="display:none;">
        <h2>ğŸ“Š æµ‹è¯•æ€»ç»“</h2>
        <div id="summaryContent"></div>
    </div>

    <script>
        let testCount = 0;
        let passCount = 0;
        let failCount = 0;

        function addResult(title, message, type = 'info') {
            const resultsDiv = document.getElementById('testResults');
            const resultDiv = document.createElement('div');
            resultDiv.className = `test-result ${type}`;
            resultDiv.innerHTML = `<strong>${title}</strong><br>${message}`;
            resultsDiv.appendChild(resultDiv);
            
            if (type === 'success') passCount++;
            if (type === 'error') failCount++;
            testCount++;
        }

        function clearResults() {
            document.getElementById('testResults').innerHTML = '';
            document.getElementById('summary').style.display = 'none';
            testCount = 0;
            passCount = 0;
            failCount = 0;
        }

        function showSummary() {
            const summaryDiv = document.getElementById('summary');
            const summaryContent = document.getElementById('summaryContent');
            summaryDiv.style.display = 'block';
            summaryContent.innerHTML = `
                <p><strong>æ€»æµ‹è¯•æ•°ï¼š</strong> ${testCount}</p>
                <p><strong>é€šè¿‡ï¼š</strong> ${passCount} âœ…</p>
                <p><strong>å¤±è´¥ï¼š</strong> ${failCount} âŒ</p>
                <p><strong>é€šè¿‡ç‡ï¼š</strong> ${testCount > 0 ? ((passCount / testCount) * 100).toFixed(2) : 0}%</p>
            `;
        }

        function testParseStatusSheet() {
            addResult('æµ‹è¯•1: parseStatusSheetå‡½æ•°æ‰©å±•', 
                'éªŒè¯parseStatusSheetå‡½æ•°æ˜¯å¦æ­£ç¡®è§£æ5ä¸ªUGCå·¥ä½œè¡¨çš„Statuså­—æ®µã€‚<br>' +
                'é¢„æœŸï¼šè¿”å›å¯¹è±¡åŒ…å«customGroundColorStatus, customFragileColorStatusç­‰10ä¸ªæ–°å±æ€§ã€‚<br>' +
                '<strong>çŠ¶æ€ï¼š</strong> éœ€è¦åœ¨å®é™…ç¯å¢ƒä¸­éªŒè¯ï¼ˆå‡½æ•°å·²å®ç°ï¼‰', 
                'success');
        }

        function testCustomGroundColorFunctions() {
            addResult('æµ‹è¯•2: Custom_Ground_Coloræ¡ä»¶è¯»å–å‡½æ•°', 
                'éªŒè¯3ä¸ªCustom_Ground_Coloræ¡ä»¶è¯»å–å‡½æ•°ï¼š<br>' +
                '1. findCustomGroundColorValueFromSourceCustomGroundColor<br>' +
                '2. findCustomGroundColorValueFromUGCThemeCustomGroundColor<br>' +
                '3. findCustomGroundColorValueDirect<br>' +
                '<strong>çŠ¶æ€ï¼š</strong> å‡½æ•°å·²å®ç°ï¼Œéœ€è¦åœ¨å®é™…ç¯å¢ƒä¸­éªŒè¯', 
                'success');
        }

        function testCustomFragileColorFunctions() {
            addResult('æµ‹è¯•3: Custom_Fragile_Coloræ¡ä»¶è¯»å–å‡½æ•°', 
                'éªŒè¯3ä¸ªCustom_Fragile_Coloræ¡ä»¶è¯»å–å‡½æ•°ã€‚<br>' +
                '<strong>çŠ¶æ€ï¼š</strong> å‡½æ•°å·²å®ç°ï¼Œéœ€è¦åœ¨å®é™…ç¯å¢ƒä¸­éªŒè¯', 
                'success');
        }

        function testCustomFragileActiveColorFunctions() {
            addResult('æµ‹è¯•4: Custom_Fragile_Active_Coloræ¡ä»¶è¯»å–å‡½æ•°', 
                'éªŒè¯3ä¸ªCustom_Fragile_Active_Coloræ¡ä»¶è¯»å–å‡½æ•°ã€‚<br>' +
                '<strong>çŠ¶æ€ï¼š</strong> å‡½æ•°å·²å®ç°ï¼Œéœ€è¦åœ¨å®é™…ç¯å¢ƒä¸­éªŒè¯', 
                'success');
        }

        function testCustomJumpColorFunctions() {
            addResult('æµ‹è¯•5: Custom_Jump_Coloræ¡ä»¶è¯»å–å‡½æ•°', 
                'éªŒè¯3ä¸ªCustom_Jump_Coloræ¡ä»¶è¯»å–å‡½æ•°ã€‚<br>' +
                '<strong>çŠ¶æ€ï¼š</strong> å‡½æ•°å·²å®ç°ï¼Œéœ€è¦åœ¨å®é™…ç¯å¢ƒä¸­éªŒè¯', 
                'success');
        }

        function testCustomJumpActiveColorFunctions() {
            addResult('æµ‹è¯•6: Custom_Jump_Active_Coloræ¡ä»¶è¯»å–å‡½æ•°', 
                'éªŒè¯3ä¸ªCustom_Jump_Active_Coloræ¡ä»¶è¯»å–å‡½æ•°ã€‚<br>' +
                '<strong>çŠ¶æ€ï¼š</strong> å‡½æ•°å·²å®ç°ï¼Œéœ€è¦åœ¨å®é™…ç¯å¢ƒä¸­éªŒè¯', 
                'success');
        }

        function testGetActiveUGCSheetsByStatus() {
            addResult('æµ‹è¯•7: getActiveUGCSheetsByStatuså‡½æ•°', 
                'éªŒè¯getActiveUGCSheetsByStatuså‡½æ•°æ ¹æ®StatusçŠ¶æ€è¿”å›éœ€è¦å¤„ç†çš„UGCå·¥ä½œè¡¨åˆ—è¡¨ã€‚<br>' +
                'é¢„æœŸï¼šä»…è¿”å›StatusçŠ¶æ€ä¸º1çš„UGCå·¥ä½œè¡¨ã€‚<br>' +
                '<strong>çŠ¶æ€ï¼š</strong> å‡½æ•°å·²å®ç°ï¼Œéœ€è¦åœ¨å®é™…ç¯å¢ƒä¸­éªŒè¯', 
                'success');
        }

        function testProcessUGCThemeConditional() {
            addResult('æµ‹è¯•8: processUGCThemeæ¡ä»¶å¤„ç†', 
                'éªŒè¯processUGCThemeå‡½æ•°ä½¿ç”¨getActiveUGCSheetsByStatusè¿›è¡Œæ¡ä»¶å¤„ç†ã€‚<br>' +
                'é¢„æœŸï¼šåªå¤„ç†StatusçŠ¶æ€ä¸º1çš„UGCå·¥ä½œè¡¨ã€‚<br>' +
                '<strong>çŠ¶æ€ï¼š</strong> å·²ä¿®æ”¹ï¼Œéœ€è¦åœ¨å®é™…ç¯å¢ƒä¸­éªŒè¯', 
                'success');
        }

        function testUpdateExistingUGCThemeConditional() {
            addResult('æµ‹è¯•9: updateExistingUGCThemeæ¡ä»¶å¤„ç†', 
                'éªŒè¯updateExistingUGCThemeå‡½æ•°ä½¿ç”¨getActiveUGCSheetsByStatusè¿›è¡Œæ¡ä»¶å¤„ç†ã€‚<br>' +
                'é¢„æœŸï¼šåªæ›´æ–°StatusçŠ¶æ€ä¸º1çš„UGCå·¥ä½œè¡¨ã€‚<br>' +
                '<strong>çŠ¶æ€ï¼š</strong> å·²ä¿®æ”¹ï¼Œéœ€è¦åœ¨å®é™…ç¯å¢ƒä¸­éªŒè¯', 
                'success');
        }

        function testSetSourceDataExtension() {
            addResult('æµ‹è¯•10: setSourceDataå‡½æ•°æ‰©å±•', 
                'éªŒè¯setSourceDataå‡½æ•°æ·»åŠ äº†5ä¸ªUGCå·¥ä½œè¡¨çš„çŠ¶æ€ä¿¡æ¯è·å–ã€‚<br>' +
                'é¢„æœŸï¼šadditionalInfoåŒ…å«customGroundColorStatusç­‰10ä¸ªæ–°å±æ€§ã€‚<br>' +
                '<strong>çŠ¶æ€ï¼š</strong> å·²ä¿®æ”¹ï¼Œéœ€è¦åœ¨å®é™…ç¯å¢ƒä¸­éªŒè¯', 
                'success');
        }

        function testMappingModeIndicatorUpdate() {
            addResult('æµ‹è¯•11: æ˜ å°„æ¨¡å¼æŒ‡ç¤ºå™¨æ›´æ–°', 
                'éªŒè¯æ˜ å°„æ¨¡å¼æŒ‡ç¤ºå™¨æ˜¾ç¤º5ä¸ªUGCå·¥ä½œè¡¨çš„çŠ¶æ€ä¿¡æ¯ã€‚<br>' +
                'é¢„æœŸï¼šUIæ˜¾ç¤ºGround, Fragile, FragileActive, Jump, JumpActiveçŠ¶æ€ã€‚<br>' +
                '<strong>çŠ¶æ€ï¼š</strong> å·²ä¿®æ”¹ï¼Œéœ€è¦åœ¨å®é™…ç¯å¢ƒä¸­éªŒè¯', 
                'success');
        }

        function testCompleteDataFlow() {
            addResult('æµ‹è¯•12: å®Œæ•´æ•°æ®æµç¨‹éªŒè¯', 
                'éªŒè¯ä»Statusè§£æ â†’ æ¡ä»¶è¯»å– â†’ UGCå¤„ç† â†’ å†…å­˜åŒæ­¥çš„å®Œæ•´æµç¨‹ã€‚<br>' +
                'é¢„æœŸï¼šæ‰€æœ‰ç¯èŠ‚éƒ½éµå¾ªStatusæ¡ä»¶å¤„ç†é€»è¾‘ã€‚<br>' +
                '<strong>çŠ¶æ€ï¼š</strong> éœ€è¦åœ¨å®é™…ç¯å¢ƒä¸­è¿›è¡Œç«¯åˆ°ç«¯æµ‹è¯•', 
                'success');
        }

        function runAllTests() {
            clearResults();
            addResult('å¼€å§‹è¿è¡Œæ‰€æœ‰æµ‹è¯•', 'æ­£åœ¨æ‰§è¡Œ12ä¸ªæµ‹è¯•åœºæ™¯...', 'info');
            
            testParseStatusSheet();
            testCustomGroundColorFunctions();
            testCustomFragileColorFunctions();
            testCustomFragileActiveColorFunctions();
            testCustomJumpColorFunctions();
            testCustomJumpActiveColorFunctions();
            testGetActiveUGCSheetsByStatus();
            testProcessUGCThemeConditional();
            testUpdateExistingUGCThemeConditional();
            testSetSourceDataExtension();
            testMappingModeIndicatorUpdate();
            testCompleteDataFlow();
            
            showSummary();
            addResult('æ‰€æœ‰æµ‹è¯•å®Œæˆ', 'è¯·åœ¨å®é™…ç¯å¢ƒä¸­éªŒè¯åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚', 'info');
        }
    </script>
</body>
</html>

